module.exports=function(s){"use strict";s.initConfig({pkg:s.file.readJSON("package.json"),clean:{assets:["assets"],images:["images"],javascripts:["javascripts"],stylesheets:["stylesheet"]},modernizr_builder:{build:{options:{config:"modernizr-config.json",dest:"javascripts/modernizr.min.js",uglify:!0}}},copy:{assets:{files:[{expand:!0,cwd:"sources/assets/copy",src:"*",dest:"assets/"}]},images:{files:[{expand:!0,cwd:"sources/images/copy",src:"*",dest:"images/"}]},javascripts:{files:[{expand:!0,cwd:"sources/javascripts/copy",src:"*",dest:"javascripts/"}]}},concat:{build:{src:["bower_components/jquery/dist/jquery.js","sources/javascripts/concat/base.js"],dest:"javascripts/main.js"}},uglify:{build:{files:[{expand:!0,cwd:"javascripts/",src:["*.js","!*.min.js"],dest:"javascripts/",ext:".min.js"}]}},sass:{build:{options:{style:"expanded",sourcemap:"none"},files:[{expand:!0,cwd:"sources/stylesheets",src:"main.scss",dest:"stylesheets/",ext:".css"}]}},cssmin:{build:{expand:!0,cwd:"stylesheets/",src:["*.css","!*.min.css"],dest:"stylesheets/",ext:".min.css"}},imagemin:{build_images:{files:[{expand:!0,cwd:"sources/images/minify",src:"*.{png,jpg,gif}",dest:"images/"}]},build_assets:{files:[{expand:!0,cwd:"sources/assets/minify",src:"*.svg",dest:"assets/"}]}},exec:{kitmanifest:{cmd:function(s){return"kit manifest"}},kit:{cmd:function(e){return s.option("site")?"kit push -s "+s.option("site")+" "+e:"kit push "+e}}},watch:{modernizr:{files:"modernizr-config.json",tasks:["modernizr_builder:build"]},js_copy:{files:"sources/javascripts/copy/*.js",tasks:["copy:javascripts","exec:kitmanifest"]},js_concat:{files:"sources/javascripts/concat/*.js",tasks:["concat:build","uglify:build","exec:kitmanifest"]},css:{files:["sources/stylesheets/*.scss","sources/stylesheets/*/*.scss"],tasks:["sass:build","cssmin:build","exec:kitmanifest"]},img_copy:{files:"sources/images/copy/*",tasks:["copy:images","exec:kitmanifest"]},img_minify:{files:"sources/images/minify/*",tasks:["imagemin:build_images","exec:kitmanifest"]},assets_copy:{files:"sources/assets/copy/*",tasks:["copy:assets","exec:kitmanifest"]},assets_minify:{files:"sources/assets/minify/*",tasks:["imagemin:build_assets","exec:kitmanifest"]},voog:{files:["javascripts/*.js","stylesheets/*.css","layouts/*.tpl","components/*.tpl"],options:{spawn:!1}}}}),s.loadNpmTasks("grunt-contrib-clean"),s.loadNpmTasks("grunt-modernizr-builder"),s.loadNpmTasks("grunt-contrib-copy"),s.loadNpmTasks("grunt-contrib-concat"),s.loadNpmTasks("grunt-contrib-uglify"),s.loadNpmTasks("grunt-contrib-sass"),s.loadNpmTasks("grunt-contrib-cssmin"),s.loadNpmTasks("grunt-contrib-imagemin"),s.loadNpmTasks("grunt-contrib-watch"),s.loadNpmTasks("grunt-exec"),s.registerTask("default",["clean","modernizr_builder","copy","concat","uglify","sass","cssmin","imagemin"]),s.event.on("watch",function(e,i,t){"voog"==t&&("added"!=e&&"deleted"!=e||s.task.run(["exec:kitmanifest"]),s.file.exists(".voog")&&"deleted"!=e&&s.task.run(["exec:kit:"+i]))})};